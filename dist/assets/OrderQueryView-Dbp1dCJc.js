import{d as I,u as N,a as U,r as h,c as x,b as t,e as l,w as s,f as u,F as L,m as Q,h as M,t as A,o as P,_ as j}from"./index-B3v5CdMq.js";const q={class:"order-query-page"},E={class:"search-item"},G={class:"type-buttons"},H={class:"search-item"},J={class:"search-item"},K={class:"search-item"},X={class:"search-item"},Y={class:"search-item"},Z={class:"search-item"},ee={class:"search-item"},te={class:"search-item"},ae={class:"search-buttons"},le={class:"transaction-summary"},ne={class:"summary-item"},oe={class:"summary-value"},se={class:"summary-item"},re={class:"summary-value"},ie=I({__name:"OrderQueryView",setup(de){const T=N(),y=[{label:"三方入款",value:"third_party_deposit"},{label:"出款管理",value:"withdrawal"},{label:"活動上分",value:"activity"},{label:"手動入款",value:"manual_deposit"},{label:"手動扣點",value:"manual_deduction"},{label:"代理自辦",value:"agent_self"},{label:"反水",value:"rebate"},{label:"紅利反水",value:"bonus_rebate"},{label:"轉入",value:"transfer_in"},{label:"轉出",value:"transfer_out"}],R=[{label:"數支付",value:"digital_pay"},{label:"負責東",value:"responsible_east"}],_=[{label:"待處理",value:"pending"},{label:"處理完畢",value:"completed"},{label:"處理失敗",value:"failed"},{label:"待定中",value:"processing"},{label:"與綁定資料不符",value:"mismatch"}],O=[{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100}],o=U({selectedTypes:[],paymentProvider:null,applyTimeRange:null,operationTimeRange:null,parentAccount:"",parentAccountWithSub:"",memberAccount:"",orderStatus:null}),D=a=>o.selectedTypes.includes(a),V=a=>{const e=o.selectedTypes.indexOf(a);e===-1?o.selectedTypes.push(a):o.selectedTypes.splice(e,1)},v=h(!1),k=h([]),$=h(0),w=h(0),d=U({page:1,pageSize:10,itemCount:0,showSizePicker:!0,pageSizes:[10,20,50,100],onChange:a=>{d.page=a,m()},onUpdatePageSize:a=>{d.pageSize=a,d.page=1,m()}}),W=a=>{d.pageSize=a,d.page=1,m()},F=[{title:"訂單編號",key:"id",width:120},{title:"會員帳號",key:"memberAccount",width:120},{title:"上層帳號/申請時間",key:"parentAccount",width:150,render(a){return`${a.parentAccount}<br>${a.applyTime}`}},{title:"類型",key:"orderType",width:120},{title:"來源 目的",key:"source",width:120,render(a){return`${a.source}<br>${a.destination}`}},{title:"變動前金額",key:"beforeAmount",width:120},{title:"變動金額",key:"changeAmount",width:120},{title:"實際金額",key:"actualAmount",width:120},{title:"變動後金額",key:"afterAmount",width:120},{title:"繳費管道",key:"paymentChannel",width:120},{title:"狀態",key:"status",width:100},{title:"操作人/時間",key:"operator",width:150,render(a){return`${a.operator}<br>${a.operationTime}`}},{title:"備註",key:"remark",width:150}],m=()=>{v.value=!0,setTimeout(()=>{const a=Array.from({length:20}).map((e,i)=>{const r=Math.floor(Math.random()*1e4),p=Math.floor(Math.random()*5e4),b=p+r,c=Math.floor(Math.random()*y.length),f=y[c].label,g=Math.floor(Math.random()*_.length),S=_[g].label;return{id:`ORD${String(1e5+i).padStart(6,"0")}`,memberAccount:`member_${1e3+i}`,parentAccount:`agent_${500+Math.floor(i/2)}`,applyTime:`2023-${String(Math.floor(Math.random()*12)+1).padStart(2,"0")}-${String(Math.floor(Math.random()*28)+1).padStart(2,"0")} ${String(Math.floor(Math.random()*24)).padStart(2,"0")}:${String(Math.floor(Math.random()*60)).padStart(2,"0")}:${String(Math.floor(Math.random()*60)).padStart(2,"0")}`,orderType:f,source:"系統",destination:"會員錢包",beforeAmount:p,changeAmount:r,actualAmount:Math.floor(r*.98),afterAmount:b,paymentChannel:Math.random()>.5?"數支付":"負責東",status:S,operator:`admin_${100+Math.floor(Math.random()*10)}`,operationTime:`2023-${String(Math.floor(Math.random()*12)+1).padStart(2,"0")}-${String(Math.floor(Math.random()*28)+1).padStart(2,"0")} ${String(Math.floor(Math.random()*24)).padStart(2,"0")}:${String(Math.floor(Math.random()*60)).padStart(2,"0")}:${String(Math.floor(Math.random()*60)).padStart(2,"0")}`,remark:Math.random()>.7?"操作成功":""}});k.value=a,d.itemCount=150,$.value=a.reduce((e,i)=>e+i.changeAmount,0),w.value=a.reduce((e,i)=>e+i.actualAmount,0),v.value=!1},500)},z=a=>a.toLocaleString("zh-TW",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),C=()=>{v.value=!0,d.page=1,setTimeout(()=>{T.success("搜尋成功"),m()},300)},B=()=>{Object.assign(o,{selectedTypes:[],paymentProvider:null,applyTimeRange:null,operationTimeRange:null,parentAccount:"",parentAccountWithSub:"",memberAccount:"",orderStatus:null}),T.info("已清除搜尋條件"),C()};return m(),(a,e)=>{const i=u("n-button"),r=u("n-grid-item"),p=u("n-select"),b=u("n-date-picker"),c=u("n-input"),f=u("n-grid"),g=u("n-card"),S=u("n-data-table");return P(),x("div",q,[e[21]||(e[21]=t("div",{class:"page-header"},[t("h1",null,"訂單查詢"),t("div",{class:"page-tools"},[t("div",{class:"page-breadcrumb"},"各式查詢>訂單查詢")])],-1)),l(g,{class:"search-area"},{default:s(()=>[l(f,{cols:24,"x-gap":12,"y-gap":16},{default:s(()=>[l(r,{span:24},{default:s(()=>[t("div",E,[e[8]||(e[8]=t("div",{class:"label"},"類型",-1)),t("div",G,[(P(),x(L,null,Q(y,n=>l(i,{key:n.value,size:"small",type:D(n.value)?"primary":"default",onClick:ue=>V(n.value)},{default:s(()=>[M(A(n.label),1)]),_:2},1032,["type","onClick"])),64))])])]),_:1}),l(r,{span:6},{default:s(()=>[t("div",H,[e[9]||(e[9]=t("div",{class:"label"},"金流商",-1)),l(p,{value:o.paymentProvider,"onUpdate:value":e[0]||(e[0]=n=>o.paymentProvider=n),options:R,placeholder:"請選擇金流商",clearable:""},null,8,["value"])])]),_:1}),l(r,{span:6},{default:s(()=>[t("div",J,[e[10]||(e[10]=t("div",{class:"label"},"申請區間",-1)),l(b,{value:o.applyTimeRange,"onUpdate:value":e[1]||(e[1]=n=>o.applyTimeRange=n),type:"daterange",clearable:"",style:{width:"100%"}},null,8,["value"])])]),_:1}),l(r,{span:6},{default:s(()=>[t("div",K,[e[11]||(e[11]=t("div",{class:"label"},"操作區間",-1)),l(b,{value:o.operationTimeRange,"onUpdate:value":e[2]||(e[2]=n=>o.operationTimeRange=n),type:"daterange",clearable:"",style:{width:"100%"}},null,8,["value"])])]),_:1}),l(r,{span:6},{default:s(()=>[t("div",X,[e[12]||(e[12]=t("div",{class:"label"},"上層帳號",-1)),l(c,{value:o.parentAccount,"onUpdate:value":e[3]||(e[3]=n=>o.parentAccount=n),placeholder:"請輸入上層帳號",clearable:""},null,8,["value"])])]),_:1}),l(r,{span:6},{default:s(()=>[t("div",Y,[e[13]||(e[13]=t("div",{class:"label"},"上層帳號（含下線）",-1)),l(c,{value:o.parentAccountWithSub,"onUpdate:value":e[4]||(e[4]=n=>o.parentAccountWithSub=n),placeholder:"請輸入上層帳號（含下線）",clearable:""},null,8,["value"])])]),_:1}),l(r,{span:6},{default:s(()=>[t("div",Z,[e[14]||(e[14]=t("div",{class:"label"},"會員帳號",-1)),l(c,{value:o.memberAccount,"onUpdate:value":e[5]||(e[5]=n=>o.memberAccount=n),placeholder:"請輸入會員帳號",clearable:""},null,8,["value"])])]),_:1}),l(r,{span:6},{default:s(()=>[t("div",ee,[e[15]||(e[15]=t("div",{class:"label"},"每頁筆數",-1)),l(p,{value:d.pageSize,"onUpdate:value":[e[6]||(e[6]=n=>d.pageSize=n),W],options:O},null,8,["value"])])]),_:1}),l(r,{span:6},{default:s(()=>[t("div",te,[e[16]||(e[16]=t("div",{class:"label"},"訂單狀態",-1)),l(p,{value:o.orderStatus,"onUpdate:value":e[7]||(e[7]=n=>o.orderStatus=n),options:_,placeholder:"請選擇訂單狀態",clearable:""},null,8,["value"])])]),_:1}),l(r,{span:24},{default:s(()=>[t("div",ae,[l(i,{type:"primary",onClick:C},{default:s(()=>e[17]||(e[17]=[M("搜尋")])),_:1}),l(i,{onClick:B},{default:s(()=>e[18]||(e[18]=[M("清除查詢")])),_:1})])]),_:1})]),_:1})]),_:1}),l(g,{class:"data-table-area"},{default:s(()=>[t("div",le,[t("div",ne,[e[19]||(e[19]=t("span",{class:"summary-label"},"總計交易金額：",-1)),t("span",oe,A(z($.value)),1)]),t("div",se,[e[20]||(e[20]=t("span",{class:"summary-label"},"小計交易金額：",-1)),t("span",re,A(z(w.value)),1)])]),l(S,{columns:F,data:k.value,pagination:d,bordered:!1,loading:v.value,size:"small",stripe:""},null,8,["data","pagination","loading"])]),_:1})])}}}),me=j(ie,[["__scopeId","data-v-f05218ed"]]);export{me as default};
